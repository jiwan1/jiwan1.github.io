---
layout: blog
title: 스프링 배치를 이용한 DB, 파일 삭제 적용기
category: blog
tags: [human]  
summary:
image: /images/blog/post2.jpg
comment: true
---
유효기간이 설정 된 메일에 대해서 db와 메일에 첨부된 파일을 삭제를 하기 위해 spring batch를 적용했습니다.
제가 원한 단계는
1. 특정 시간대에 batch가 실행
2. db에서 유효기간이 지난 메일 하나를 선택
3. 해당 메일에 첨부된 파일명을 리스트로 저장
4. db에서 메일을 삭제(파일 정보를 저장한 db는 메일 db를 cascade로 참조해 자동으로 삭제)
5. 파일명 리스트를 이용해 파일 



## pom.xml
![image](https://user-images.githubusercontent.com/10074426/52131523-4cf05900-2680-11e9-8ee1-687195aeb285.png)
pom.xml에 위와 같이 dependency를 추가합니다. 버전은 3.0.7입니다.

## ServiceApplication.java
![image](https://user-images.githubusercontent.com/10074426/52129945-3fd16b00-267c-11e9-8562-e3a710abb41d.png)

스프링 배치를 이용하기 위해 @EnableBatchProcessing 어노테이션을 추가합니다.
